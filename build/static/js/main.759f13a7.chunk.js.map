{"version":3,"sources":["components/Home.js","firebaseConfig.js","components/FilterItem.js","components/SearchBar.js","components/FilterPane.js","components/BookItem.js","components/Books.js","components/CategoryItem.js","components/BookCategories.js","components/ShowBook.js","components/SearchResultItem.js","components/AddBook.js","components/RecommendationItem.js","components/Recommendations.js","components/AddRecommendation.js","components/ShowRecommendation.js","App.js","serviceWorker.js","index.js"],"names":["Home","react_default","a","createElement","Component","firebase","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","FilterItem","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleInputChange","event","checked","state","isChecked","setState","addFilterCallback","target","name","removeFilterCallback","className","concat","type","onChange","SearchBar","onSearchChange","searchText","value","searchBooksCallback","placeholder","FilterPane","categories","_this2","allCategories","firestore","collection","get","then","querySnapshot","forEach","doc","push","data","categoryItems","map","cat","src_components_FilterItem","key","src_components_SearchBar","BookItem","onDelete","deleteBookCallback","id","src","thumbnail","alt","title","react_router_dom","to","author","match","url","onClick","Books","deleteBook","window","confirm","delete","showStatusCallback","message","console","log","catch","error","status","onFilterResults","compareTitles","b","title1","toUpperCase","title2","comparison","onAddFilter","allFilters","filters","includes","onRemoveFilter","index","indexOf","splice","onSearchBooks","searchString","booksToSearch","books","foundBooks","book","toLowerCase","results","filteredBooks","filteredResults","thingToCheck","where","sort","bookItems","mapBooks","src_components_BookItem","assign","defaultBooks","allBooks","orderBy","src_components_FilterPane","CategoryItem","editing","updateSelectedCategoriesCallback","selected","hidden","BookCategories","changeNewCategory","newCategory","createNewCategory","set","allCategoryItems","unshift","src_components_CategoryItem","recommendationsPage","listCategories","selectedCategories","isHidden","unselectedCategories","saveCategories","changeEditState","saveSelectedCategoriesCallback","editCategories","isEditing","ShowBook","changeCategoryAssignment","catObject","params","update","saveSelectedCategories","updateSelectedCategories","unselected","filtered","filter","currentName","exists","arr","keys","unselectedCats","selectedCats","history","goBack","publisher","publishedDate","description","createdByName","length","src_components_BookCategories","SearchResultItem","addBookCallback","API_URL","AddBook","onHandleSearchClick","preventDefault","getBooks","onHandleSearchChange","searchQuery","addBook","previewLink","createdByEmail","auth","currentUser","email","displayName","hideAddBookCallback","currentRequest","responses","FieldValue","arrayUnion","shouldRedirect","addedBook","axios","response","searchList","items","src_components_SearchResultItem","volumeInfo","authors","imageLinks","smallThumbnail","react_router","location","pathname","RecommendationItem","formatCategories","i","t","dateCreated","toDate","formatted","moment","format","requester","user","Recommendations","recommendationRequests","allData","allRecReqs","src_components_RecommendationItem","AddRecommendation","saveCurrentRecRequest","add","note","noteText","serverTimestamp","docRef","newDoc","updateTextArea","ShowRecommendation","recommendationRequest","onShowAddBookPage","showAddBook","onHideAddBookPage","reload","formattedDate","allMappedBooks","src_components_AddBook","require","firebaseAppAuth","providers","googleProvider","GoogleAuthProvider","Users","App","showNewStatus","statusToShow","setTimeout","resetStatus","checkAgainstDatabase","addUserToDatabase","onSignIn","provider","signInWithPopup","result","authUser","_this$props","signOut","path","exact","component","render","src_components_Books","src_components_ShowBook","src_components_Recommendations","src_components_AddRecommendation","src_components_ShowRecommendation","withFirebaseAuth","Boolean","hostname","ReactDOM","src_App_0","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.759f13a7.chunk.js","sourcesContent":["import React, {Component} from 'react'\nimport './Home.css';\n\n\nclass Home extends Component {\n  render () {\n\n  return (\n    <div>\n      Home Page\n    </div>\n  )}\n}\n\nexport default Home;","\n\nimport * as firebase from 'firebase';\n// import firestore from 'firebase/firestore'\n\nconst config = {\n  apiKey: \"AIzaSyAD0ttSvuW22OTa4SidFkKEJx7fBGjFvr0\",\n  authDomain: \"check-it-out-efcdc.firebaseapp.com\",\n  databaseURL: \"https://check-it-out-efcdc.firebaseio.com\",\n  projectId: \"check-it-out-efcdc\",\n  storageBucket: \"check-it-out-efcdc.appspot.com\",\n  messagingSenderId: \"407557781729\",\n  appId: \"1:407557781729:web:05052bbc5c9ac84f\"\n};\nfirebase.initializeApp(config);\n\n// firebase.firestore().settings();\n\nexport default firebase;","import React, { Component } from 'react';\nimport './FilterItem.css'\n\nclass FilterItem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isChecked: false,\n    }\n  }\n\n  handleInputChange = (event) => {\n    const checked = this.state.isChecked;\n    this.setState({\n      isChecked: !checked,\n    })\n\n    if(this.state.isChecked === false) {\n      this.props.addFilterCallback(event.target.name);\n    } else {\n      this.props.removeFilterCallback(event.target.name);\n    }\n  }\n\n  render() {\n    return (\n      <label className={`category-button ${this.props.type}`}>\n        <input\n          name={this.props.name}\n          type=\"checkbox\"\n          checked={this.state.isChecked}\n          onChange={this.handleInputChange} />\n        {this.props.name}\n      </label>\n    )\n  };\n}\n\nexport default FilterItem;","import React, { Component } from 'react';\nimport './SearchBar.css';\n\nclass SearchBar extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      searchText: \"\",\n    }\n  }\n\n  onSearchChange = (event) => {\n    this.setState({\n      searchText: event.target.value,\n    });\n\n    this.props.searchBooksCallback(event.target.value);\n  }\n\n  render() {\n    return (\n      <div className=\"search-bar-container\">\n        <label className=\"search-label\">\n          Search Books:\n        <input className=\"search-input\"\n            placeholder=\"Title, author\"\n            value={this.state.searchText}\n            onChange={this.onSearchChange}></input>\n        </label>\n      </div>\n    );\n  }\n}\n\nexport default SearchBar;","import React, { Component } from 'react';\nimport firebase from '../firebaseConfig';\nimport FilterItem from './FilterItem.js';\nimport SearchBar from './SearchBar.js';\nimport './FilterPane.css';\n\nclass FilterPane extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      categories: [],\n    }\n  };\n\n  componentWillMount() {\n    const allCategories = this.state.categories;\n    const db = firebase.firestore().collection(\"categories\");\n\n    db.get().then((querySnapshot) => {\n      querySnapshot.forEach((doc) => {\n        allCategories.push({ name: doc.data().name, type: doc.data().type });\n      });\n\n      const categoryItems = allCategories.map((cat) => {\n        return <FilterItem\n          key={cat.name}\n          name={cat.name}\n          type={cat.type}\n          addFilterCallback={this.props.addFilterCallback}\n          removeFilterCallback={this.props.removeFilterCallback}\n        />\n      });\n\n      this.setState({\n        categories: categoryItems,\n      });\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"filterpane-container\">\n        <SearchBar searchBooksCallback={this.props.searchBooksCallback} />\n        <div className=\"categories-container\">\n          <p><strong>Filter by Category:</strong></p>\n          {this.state.categories}\n        </div>\n      </div>\n    )\n  }\n\n}\n\nexport default FilterPane;","import React, {Component} from 'react';\n\nimport { Link } from 'react-router-dom';\nimport './BookItem.css';\n\nclass BookItem extends Component {\n\n  onDelete = () => {\n    this.props.deleteBookCallback(this.props.id);\n  }\n\n  render () {\n    return (\n      <div className=\"bookitem\">\n        <img src={this.props.thumbnail} alt={this.props.title} className=\"book-item-thumbnail\"></img>\n        <Link to={`/books/${this.props.id}`}>{this.props.title}</Link><p> {this.props.author}</p>\n        {this.props.match.url === \"/books/\" ? <span className=\"delete-button\" onClick={this.onDelete}>\n          <small>Delete from Library</small>\n          </span> : null}\n      </div>\n    )\n  }\n}\n\nexport default BookItem;","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport FilterPane from './FilterPane.js';\nimport BookItem from './BookItem.js';\nimport firebase from '../firebaseConfig.js'\n\nimport './Books.css';\n\n\nclass Books extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      books: [],\n      defaultBooks: [],\n      filters: [],\n    }\n\n  }\n\n  componentDidMount() {\n    const allBooks = this.state.books;\n    const db = firebase.firestore().collection(\"books\").orderBy(\"title\");\n\n    db.get().then((querySnapshot) => {\n\n      querySnapshot.forEach((doc) => {\n\n        allBooks.push({\n          title: doc.data().title,\n          author: doc.data().author,\n          id: doc.data().id,\n          thumbnail: doc.data().thumbnail,\n          categories: doc.data().categories,\n        });\n      });\n\n      const bookItems = this.mapBooks(allBooks);\n\n      this.setState({\n        books: bookItems,\n        defaultBooks: bookItems,\n      });\n    });\n  }\n\n  deleteBook = (id) => {\n    // delete book from db\n    if (window.confirm(\"Are you sure you want to delete this book?\")) {\n      const db = firebase.firestore();\n\n      db.collection(\"books\").doc(id).delete().then(() => {\n        const status = {\n          type: \"success\",\n          message: \"Successfully deleted book from library!\",\n        }\n        this.props.showStatusCallback(status);\n        console.log(\"Document successfully deleted!\");\n      }).catch((error) => {\n        console.error(\"Error removing document: \", error);\n        const status = {\n          type: \"error\",\n          message: error,\n        }\n        this.props.showStatusCallback(status);\n      });\n\n      this.onFilterResults();\n    }\n  }\n\n  compareTitles = (a, b) => {\n    const title1 = a.title.toUpperCase();\n    const title2 = b.title.toUpperCase();\n\n    let comparison = 0;\n    if (title1 > title2) {\n      comparison = 1;\n    } else if (title1 < title2) {\n      comparison = -1;\n    }\n    return comparison;\n\n  }\n\n  onAddFilter = (name) => {\n    const allFilters = this.state.filters;\n    if (!allFilters.includes(name)) {\n      allFilters.push(name);\n    }\n\n    this.setState({\n      filters: allFilters,\n    });\n\n    this.onFilterResults();\n\n  }\n\n  onRemoveFilter = (name) => {\n    const allFilters = this.state.filters;\n    if (allFilters.includes(name)) {\n      let index = allFilters.indexOf(name);\n      if (index !== -1) allFilters.splice(index, 1);\n    }\n\n    this.setState({\n      filters: allFilters,\n    })\n\n    this.onFilterResults();\n\n  }\n\n  onSearchBooks = (searchString) => {\n    const booksToSearch = this.state.books;\n    const foundBooks = [];\n\n    if (searchString !== \"\") {\n      booksToSearch.forEach(function (book) {\n        if (book.props.title.toLowerCase().includes(searchString.toLowerCase()) ||\n          book.props.author.toLowerCase().includes(searchString.toLowerCase())) {\n          foundBooks.push(book);\n        }\n      });\n    } else {\n      this.onFilterResults();\n    }\n\n\n    this.setState({\n      books: foundBooks,\n    })\n  }\n\n  onFilterResults = (results) => {\n    const filteredBooks = [];\n    let filteredResults = firebase.firestore().collection('books');\n\n    this.state.filters.forEach(function (cat) {\n      const thingToCheck = 'categories.' + cat;\n      filteredResults = filteredResults.where(thingToCheck, '==', true);\n    });\n\n    filteredResults.get().then((querySnapshot) => {\n\n      querySnapshot.forEach(function (doc) {\n        filteredBooks.push({\n          title: doc.data().title,\n          author: doc.data().author,\n          thumbnail: doc.data().thumbnail,\n          id: doc.data().id,\n          categories: doc.data().categories,\n        });\n      });\n\n      filteredBooks.sort(this.compareTitles);\n\n\n      const bookItems = this.mapBooks(filteredBooks);\n\n      this.setState({\n        books: bookItems,\n      });\n    });\n  }\n\n  mapBooks = (books) => {\n    const bookItems = books.map((book) => {\n      return <BookItem\n        {...this.props}\n        key={book.id}\n        title={book.title}\n        author={book.author}\n        id={book.id}\n        thumbnail={book.thumbnail}\n        categories={book.categories}\n        deleteBookCallback={this.deleteBook}\n      />\n    });\n\n    return (bookItems);\n  }\n\n  render() {\n    return (\n      <div className=\"books-container\">\n        <div className=\"booklist-container\">\n          <div className=\"book-search\">\n            <Link to=\"/addbook/\">Add a book to the library</Link>\n          </div>\n          {this.state.books}\n        </div>\n        <div className=\"filter-pane-container\">\n          <FilterPane {...this.props} addFilterCallback={this.onAddFilter}\n            removeFilterCallback={this.onRemoveFilter}\n            searchBooksCallback={this.onSearchBooks} />\n        </div>\n      </div>\n    )\n  }\n\n}\n\nexport default Books;","import React, { Component } from 'react';\nimport './CategoryItem.css'\n\nclass CategoryItem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isChecked: this.props.selected,\n    }\n  }\n\n  handleInputChange = (event) => {\n    if (this.props.editing) {\n    const checked = this.state.isChecked;\n    this.setState({\n      isChecked: !checked,\n    })\n\n  this.props.updateSelectedCategoriesCallback(event.target.name, checked);\n  }\n  }\n\n  render() {\n    return (\n      <div className={this.props.hidden ? \"hidden\" : \"show-categories-container\"}>\n        <label className={this.state.isChecked ? \"show-category category-button selected\" : \"show-category category-button unselected\"}>\n          <input\n            name={this.props.name}\n            type=\"checkbox\"\n            checked={this.state.isChecked}\n            onChange={this.handleInputChange} \n            className=\"checkbox-hidden\" />\n          <span className={this.props.editing ? \"checkmark\" : \"checkmark hidden\"}></span>\n          {this.props.name}\n        </label>\n      </div>\n    )\n  };\n}\n\nexport default CategoryItem;","import React, { Component } from 'react';\n\nimport firebase from '../firebaseConfig';\n\nimport CategoryItem from './CategoryItem';\nimport './BookCategories.css';\n\nclass BookCategories extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      allCategoryItems: [],\n      editing: false,\n      newCategory: \"\",\n    }\n  }\n\n  componentDidMount() {\n    this.listCategories(this.state.editing);\n  }\n\n  changeNewCategory = (event) => {\n    this.setState({\n      newCategory: event.target.value,\n    });\n  }\n\n  createNewCategory = () => {\n    const catCollection = firebase.firestore().collection(\"categories\");\n\n    catCollection.doc(this.state.newCategory).set({\n      name: this.state.newCategory\n    })\n      .then(() => {\n        const status = {\n          type: \"success\",\n          message: \"Successfully created category!\"\n        }\n        this.props.showStatusCallback(status);\n        console.log(\"Document successfully written!\");\n\n        const allCategories = this.state.allCategoryItems;\n        allCategories.unshift(\n          <CategoryItem\n            key={this.state.newCategory}\n            name={this.state.newCategory}\n            selected={false}\n            editing={this.state.editing}\n            updateSelectedCategoriesCallback={this.props.updateSelectedCategoriesCallback}\n            recommendationsPage={this.props.recommendationsPage}\n          />\n        )\n\n        this.setState({\n          allCategoryItems: allCategories,\n          newCategory: \"\",\n        })\n      })\n      .catch((error) => {\n        const status = {\n          type: \"error\",\n          message: error,\n        }\n        this.props.showStatusCallback(status);\n        console.error(\"Error writing document: \", error);\n      });\n\n\n  }\n\n  listCategories = (editing) => {\n    let allCategories = [];\n    this.props.selectedCategories.forEach((cat) => {\n\n      allCategories.push(\n        <CategoryItem\n          key={cat}\n          name={cat}\n          selected={true}\n          editing={editing}\n          updateSelectedCategoriesCallback={this.props.updateSelectedCategoriesCallback}\n        />\n      );\n    });\n\n    const isHidden = !editing;\n    this.props.unselectedCategories.forEach((cat) => {\n      allCategories.push(\n        <CategoryItem\n          key={cat}\n          name={cat}\n          selected={false}\n          editing={editing}\n          updateSelectedCategoriesCallback={this.props.updateSelectedCategoriesCallback}\n          hidden={isHidden}\n        />\n      )\n    });\n\n    this.setState({\n      allCategoryItems: allCategories,\n    });\n  };\n\n  saveCategories = () => {\n    this.changeEditState();\n    if (!this.props.match.url === \"/addrec/\") {\n    this.props.saveSelectedCategoriesCallback();\n    }\n  };\n\n  editCategories = () => {\n    this.changeEditState();\n  };\n\n  changeEditState = () => {\n    const isEditing = !this.state.editing;\n\n    this.listCategories(isEditing);\n\n    this.setState({\n      editing: !this.state.editing,\n    })\n  }\n\n  render() {\n    return (\n      <div className=\"categories-container\" >\n        <span className=\"categories-header\">\n          <strong>Categories: </strong>\n          {this.state.editing ? <span className=\"button\" onClick={this.saveCategories}>Save</span> : <span className=\"button\" onClick={this.editCategories}>Add/Edit</span>}\n        </span>\n        <div className={this.state.editing ? \"new-categories\" : \"hidden\"}>\n          <span>\n            Don't see the category you want? <span className=\"create-category-label\">Create a new category:</span>\n            <input name=\"add-category\" value={this.state.newCategory}\n              onChange={this.changeNewCategory}></input>\n            <span className=\"create-category-submit\" onClick={this.createNewCategory}>Create</span>\n          </span>\n        </div>\n        <div className=\"category-items-container\">\n          {this.state.allCategoryItems}\n        </div>\n      </div >\n\n    )\n  }\n}\n\nexport default BookCategories;","import React, { Component } from 'react';\nimport firebase from '../firebaseConfig.js';\n\nimport BookCategories from './BookCategories.js'\n\nimport './ShowBook.css';\n\nclass ShowBook extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      book: {},\n      categories: [],\n      selectedCategories: [],\n      unselectedCategories: [],\n    }\n  }\n\n  componentDidMount() {\n    const book = firebase.firestore().collection(\"books\").doc(this.props.match.params.id);\n    book.get().then((doc) => {\n      if (doc.exists) {\n        const categories = doc.data().categories;\n        const arr = categories ? Object.keys(categories) : [];\n        this.setState({\n          book: doc.data(),\n          categories: arr,\n        });\n\n\n      } else {\n        const status = {\n          type: \"error\",\n          message: `Book does not exist`,\n        }\n        this.props.showStatusCallback(status);\n      }\n    }).catch((error) => {\n      const status = {\n        type: \"error\",\n        message: error.message,\n      }\n      this.props.showStatusCallback(status);\n      console.log(\"Error getting document:\", error);\n    });\n\n    const unselectedCats = [];\n    const selectedCats = [];\n\n    const dbCats = firebase.firestore().collection(\"categories\");\n    dbCats.get().then((querySnapshot) => {\n\n      querySnapshot.forEach((doc) => {\n        if (!this.state.categories.includes(doc.data().name)) {\n\n          unselectedCats.push(\n            doc.data().name\n          );\n        } else {\n          selectedCats.push(\n            doc.data().name\n          )\n        }\n      });\n      this.setState({\n        selectedCategories: selectedCats,\n        unselectedCategories: unselectedCats,\n      });\n\n    });\n  }\n\n  changeCategoryAssignment = (catObject) => {\n    const book = firebase.firestore().collection(\"books\").doc(this.props.match.params.id);\n    book.update({\n      categories: catObject,\n    })\n      .then(() => {\n\n        const status = {\n          type: \"success\",\n          message: \"Successfully updated categories!\"\n        }\n        this.props.showStatusCallback(status);\n      })\n      .catch(function (error) {\n        const status = {\n          type: \"error\",\n          message: error,\n        }\n        this.props.showStatusCallback(status);\n      });\n  }\n\n  saveSelectedCategories = () => {\n    const catObject = {};\n    this.state.selectedCategories.forEach((cat) => {\n      catObject[cat] = true;\n\n    })\n\n    this.changeCategoryAssignment(catObject);\n  }\n\n  updateSelectedCategories = (name, checked) => {\n    const selected = this.state.selectedCategories;\n    const unselected = this.state.unselectedCategories;\n\n    if (!checked) {\n      selected.push(name);\n      const filtered = unselected.filter(function (currentName) {\n        return currentName !== name;\n      });\n      this.setState({\n        selectedCategories: selected,\n        unselectedCategories: filtered,\n      })\n    } else {\n      unselected.push(name);\n      const filtered = selected.filter(function (currentName) {\n        return currentName !== name;\n      });\n      this.setState({\n        unselectedCategories: unselected,\n        selectedCategories: filtered,\n      })\n    }\n  }\n\n  render() {\n    if (this.state.book.title) {\n      return (\n        <div className=\"show-book-container\">\n          <span className=\"back-link\" onClick={this.props.history.goBack}>Go back</span>\n          <div className=\"book-info\">\n            <img src={this.state.book.thumbnail} alt={this.state.book.title} className=\"thumbnail\"></img>\n            <h2 className=\"title\">{this.state.book.title}</h2>\n            <span className=\"author\"><strong>{this.state.book.author}</strong></span>\n            <span className=\"publish-info\">Published by: {this.state.book.publisher}, {this.state.book.publishedDate}</span>\n            <span className=\"description\">{this.state.book.description}</span>\n            <span className=\"created-by\"><strong>Book added by:</strong> {this.state.book.createdByName ? this.state.book.createdByName : \"\"}</span>\n          </div>\n          <div className=\"book-categories-container\">\n            {this.state.unselectedCategories.length > 0 || this.state.selectedCategories.length > 0 ? <BookCategories {...this.props}\n              categories={this.state.categories}\n              selectedCategories={this.state.selectedCategories}\n              unselectedCategories={this.state.unselectedCategories}\n              updateSelectedCategoriesCallback={this.updateSelectedCategories}\n              saveSelectedCategoriesCallback={this.saveSelectedCategories}\n              showStatusCallback={this.props.showStatusCallback}\n            /> : null}\n          </div>\n        </div>\n      )\n    } else {\n      return (null);\n    }\n  }\n}\n\nexport default ShowBook;","import React from 'react';\nimport './SearchResultItem.css'\n\nconst SearchResultItem = (props) => {\n\n  const { title, author, thumbnail, description, addBookCallback } = props;\n\n  return (\n    <div className=\"search-results\">\n      <div className=\"search-results-image-and-button\">\n        <img src={thumbnail} alt={title} className=\"search-result-thumbnail\"></img>\n        <span className=\"add-button\"  onClick={() => { addBookCallback(props) }}>Add to Library</span>\n      </div>\n      <span className=\"search-result-title\">{title}</span>\n      <span className=\"search-result-author\"> {author}</span>\n      <span className=\"search-result-description\">{description}</span>\n    </div>\n  )\n}\n\nexport default SearchResultItem;","import React, { Component } from 'react';\nimport axios from 'axios';\nimport firebase from '../firebaseConfig.js';\nimport { Redirect } from 'react-router-dom';\nimport './AddBook.css';\n\nimport SearchResultItem from './SearchResultItem.js'\n\n\n\nconst API_URL = 'https://www.googleapis.com/books/v1/volumes';\nclass AddBook extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      searchQuery: \"\",\n      results: [],\n      shouldRedirect: false,\n      addedBook: null,\n    }\n  }\n\n  onHandleSearchClick = (event) => {\n    event.preventDefault();\n    this.getBooks();\n  }\n\n  onHandleSearchChange = (event) => {\n    this.setState({\n      searchQuery: event.target.value,\n    })\n  }\n\n  addBook = (book) => {\n    // add book to db\n    const db = firebase.firestore().collection(\"books\");\n\n    db.doc(book.id).set({\n      id: book.id,\n      title: book.title,\n      author: book.author,\n      thumbnail: book.thumbnail,\n      publishedDate: book.publishedDate,\n      publisher: book.publisher,\n      previewLink: book.previewLink,\n      description: book.description,\n      createdByEmail: firebase.auth().currentUser.email,\n      createdByName: firebase.auth().currentUser.displayName,\n    })\n      .then(() => {\n\n        if (this.props.hideAddBookCallback) {\n          const docRef = firebase.firestore().collection(\"recommendationRequests\").doc(this.props.currentRequest);\n          return docRef.update({\n            responses: firebase.firestore.FieldValue.arrayUnion(book.id),\n        })\n        .then(() => {\n            console.log(\"Document successfully updated!\");\n            this.props.hideAddBookCallback();\n        })\n        .catch((error) => {\n            // The document probably doesn't exist.\n            console.error(\"Error updating document: \", error);\n        });\n        }\n        this.setState({\n          shouldRedirect: true,\n          addedBook: book.id,\n        })\n\n        const status = {\n          type: \"success\",\n          message: (this.props.hideAddBookCallback ? \"Successfully added your response to recommendation request!\" : \"Successfully added book to library! Add categories on this page.\")\n        }\n        this.props.showStatusCallback(status);\n      })\n      .catch(function (error) {\n        const status = {\n          type: \"error\",\n          message: error,\n        }\n        this.props.showStatusCallback(status);\n      });\n\n  }\n\n\n  getBooks = () => {\n    axios.get(`${API_URL}?q=${this.state.searchQuery}&printType=books`)\n      .then((response) => {\n        const searchList = response.data.items.map((book) => {\n          return <SearchResultItem\n            key={book.id}\n            id={book.id}\n            title={book.volumeInfo.title}\n            author={book.volumeInfo.authors ? book.volumeInfo.authors[0] : \"unknown\"}\n            publishedDate={book.volumeInfo.publishedDate ? book.volumeInfo.publishedDate : \"unknown\"}\n            publisher={book.volumeInfo.publisher ? book.volumeInfo.publisher : \"Unknown\"}\n            thumbnail={book.volumeInfo.imageLinks ? book.volumeInfo.imageLinks.smallThumbnail : \"\"}\n            description={book.volumeInfo.description ? book.volumeInfo.description : \"\"}\n            previewLink={book.volumeInfo.previewLink ? book.volumeInfo.previewLink : \"\"}\n\n            addBookCallback={this.addBook}\n          />\n        });\n        this.setState({ results: searchList })\n      })\n      .catch((error) => {\n        console.log(error);\n      })\n  }\n\n  render() {\n    if (this.state.shouldRedirect) {\n      return <Redirect to={`/books/${this.state.addedBook}`} />\n    }\n\n    console.log(this.props.history);\n\n    return (\n      <div className=\"add-book-container\">\n        <div className=\"add-book-search-bar\">\n          <label>\n            {this.props.history.location.pathname === \"/addbook/\" ? `Search for a new book:` : `Add a new book as a response to this recommendation request:`}\n            <input name=\"search-api\" placeholder=\"Title\" value={this.state.searchQuery} onChange={this.onHandleSearchChange}></input>\n            <span onClick={this.onHandleSearchClick} className=\"button submit-button\">Search</span>\n          </label>\n        </div>\n\n        <div className=\"search-results-container\">\n          {this.state.results}\n        </div>\n      </div>\n    )\n  }\n\n}\n\nexport default AddBook;","import React, { Component } from 'react';\nimport * as moment from 'moment';\n\nimport { Link } from 'react-router-dom';\n\nimport './RecommendationItem.css';\n\nclass RecommendationItem extends Component {\n\n  formatCategories = () => {\n    return (this.props.categories.map((cat, i) => {\n      return (<li className=\"category-button\" key={i}>{cat}</li>);\n    })\n\n    )\n  }\n\n  render() {\n    var t = this.props.dateCreated.toDate();\n    const formatted = moment(t).format(\"MMM Do YYYY\")\n    return (\n      <div className=\"rec-item-link\">\n          <div className=\"rec-item-container\">\n            \n        <span className=\"rec-name-date\">\n        <Link to={`${this.props.match.url}${this.props.id}`}>\n              {formatted}: Submitted by\n          {` ${this.props.requester}`}\n          </Link>\n          <span className=\"delete-rec-link\"><small>Delete this request {this.props.user.email}</small></span>\n            </span>\n            <ul className=\"rec-category-list\">{this.formatCategories()}</ul>\n            <span className=\"responses\">{this.props.responses.length} {this.props.responses.length === 1 ? \"response\" : \"responses\"}</span>\n          </div>\n      </div >\n    )\n  }\n\n}\n\nexport default RecommendationItem;","import React, { Component } from 'react';\nimport firebase from \"../firebaseConfig\";\nimport { Link } from 'react-router-dom';\n\nimport RecommendationItem from './RecommendationItem.js';\n\nimport './Recommendations.css';\n\nclass Recommendations extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      recommendationRequests: [],\n    }\n  }\n\n  componentDidMount() {\n    const allData = [];\n    const db = firebase.firestore();\n    db.collection(\"recommendationRequests\").get().then((querySnapshot) => {\n      querySnapshot.forEach((doc) => {\n        // doc.data() is never undefined for query doc snapshots\n        \n        allData.push (\n          {\n            id: doc.id,\n            user: doc.data().user,\n            dateCreated: doc.data().dateCreated,\n            categories: doc.data().categories,\n            responses: doc.data().responses,\n          }\n        )\n\n      });\n\n      const allRecReqs = allData.map ((doc) => {\n        return (\n          <RecommendationItem \n            {...this.props}\n            key={doc.id}\n            id={doc.id}\n            requester={doc.user}\n            dateCreated={doc.dateCreated}\n            categories={doc.categories}\n            responses={doc.responses}\n          />\n        )\n      })\n\n      this.setState ({\n        recommendationRequests: allRecReqs,\n      })\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"recommendations-container\" >\n        <div className=\"new-recommendation-container\"><Link to=\"/addrec/\">Request a new recommendation</Link></div>\n        {this.state.recommendationRequests}\n      </div>\n    )\n  }\n}\n\nexport default Recommendations;","import React, { Component } from 'react';\nimport firebase from '../firebaseConfig';\nimport { Redirect } from 'react-router-dom';\n\nimport BookCategories from './BookCategories';\nimport './AddRecommendation.css'\n\nclass AddRecommendation extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      selectedCategories: [],\n      unselectedCategories: [],\n      categories: [],\n      note: \"\",\n      shouldRedirect: false,\n      newDoc: null,\n    }\n  }\n\n  componentDidMount() {\n    const unselectedCats = [];\n    const selectedCats = [];\n\n    const dbCats = firebase.firestore().collection(\"categories\");\n    dbCats.get().then((querySnapshot) => {\n\n      querySnapshot.forEach((doc) => {\n        if (!this.state.categories.includes(doc.data().name)) {\n\n          unselectedCats.push(\n            doc.data().name\n          );\n        } else {\n          selectedCats.push(\n            doc.data().name\n          )\n        }\n      });\n      this.setState({\n        selectedCategories: selectedCats,\n        unselectedCategories: unselectedCats,\n      });\n    });\n  }\n\n  saveSelectedCategories = () => {\n    const catObject = {};\n    this.state.selectedCategories.forEach((cat) => {\n      catObject[cat] = true;\n\n    })\n\n    this.changeCategoryAssignment(catObject);\n  }\n\n  updateSelectedCategories = (name, checked) => {\n    const selected = this.state.selectedCategories;\n    const unselected = this.state.unselectedCategories;\n\n    if (!checked) {\n      selected.push(name);\n      const filtered = unselected.filter(function (currentName) {\n        return currentName !== name;\n      });\n      this.setState({\n        selectedCategories: selected,\n        unselectedCategories: filtered,\n      })\n    } else {\n      unselected.push(name);\n      const filtered = selected.filter(function (currentName) {\n        return currentName !== name;\n      });\n      this.setState({\n        unselectedCategories: unselected,\n        selectedCategories: filtered,\n      })\n    }\n  }\n\n  saveCurrentRecRequest = () => {\n    const db = firebase.firestore();\n\n    db.collection(\"recommendationRequests\").add({\n      user: this.props.user.displayName,\n      categories: this.state.selectedCategories,\n      note: this.state.noteText,\n      responses: [],\n      dateCreated: firebase.firestore.FieldValue.serverTimestamp(),\n    })\n      .then((docRef) => {\n        const status = {\n          type:\"success\",\n          message: \"Successfully submitted request!\"\n        };\n        this.props.showStatusCallback(status);\n        this.setState({\n          shouldRedirect: true,\n          newDoc: docRef.id,\n        })\n      })\n      .catch((error) => {\n        const status = {\n          type: \"error\",\n          message: error,\n        }\n        this.props.showStatusCallback(status);\n        console.error(\"Error writing document: \", error);\n      });\n  }\n\n  updateTextArea = (event) => {\n    this.setState ({\n      noteText: event.target.value,\n    })\n  }\n\n  render() {\n    if (this.state.shouldRedirect && this.state.newDoc) {\n      return <Redirect to={`/recs/${this.state.newDoc}`} />\n    }\n    return (\n      <div className=\"add-rec-container\">\n        <div className=\"add-rec-instructions\"><p>\n          <strong>Can't find the kind of book you're looking for in the existing Check It Out library?</strong>\n        </p>\n          <p>\n            To request recommendations, select the categories you would like the recommended books to have,\n            and then click the \"Submit\" button to notify all users that you would like them to\n          add new books that meet your criteria. You may also add a note to further describe the kind of books you're looking for.</p></div>\n\n\n        <div className=\"add-rec-categories-container\">\n          <BookCategories {...this.props}\n            categories={this.state.categories}\n            selectedCategories={this.state.selectedCategories}\n            unselectedCategories={this.state.unselectedCategories}\n            updateSelectedCategoriesCallback={this.updateSelectedCategories}\n            saveSelectedCategoriesCallback={this.saveSelectedCategories}\n            showStatusCallback={this.props.showStatusCallback}\n          />\n        </div>\n        <div className=\"message-text-area-container\">\n          <textarea className=\"message-text-area\" value={this.state.noteText} placeholder=\"Additional notes\" onChange={this.updateTextArea}></textarea>\n        </div>\n        <span className=\"button save-button\" onClick={this.saveCurrentRecRequest}>Submit Request</span>\n\n      </div>\n    )\n  }\n\n}\n\nexport default AddRecommendation;","import React, { Component } from 'react';\nimport firebase from '../firebaseConfig';\nimport * as moment from 'moment';\n\nimport './ShowRecommendation.css';\n\nimport BookItem from './BookItem.js';\nimport AddBook from './AddBook.js';\n\n\nclass ShowRecommendation extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      recommendationRequest: {},\n      formattedDate: \"\",\n      books: [],\n      showAddBook: false,\n    }\n  }\n\n  formatCategories = () => {\n    return (this.state.recommendationRequest.categories.map((cat, i) => {\n      return (<li className=\"category-button\" key={i}>{cat}</li>);\n    })\n\n    )\n  }\n\n  componentDidMount() {\n    const recReq = firebase.firestore().collection(\"recommendationRequests\").doc(this.props.match.params.id);\n    recReq.get().then((doc) => {\n      if (doc.exists) {\n        var t = doc.data().dateCreated.toDate();\n        const formatted = moment(t).format(\"MMM Do YYYY\");\n        let allMappedBooks = [];\n        let allBooks = [];\n        // get books from responses\n        const books = firebase.firestore().collection(\"books\");\n        if (doc.data().responses.length > 0) {\n          doc.data().responses.forEach((response) => {\n            books.where(\"id\", \"==\", response)\n              .get()\n              .then((querySnapshot) => {\n\n                querySnapshot.forEach((doc) => {\n                  // doc.data() is never undefined for query doc snapshots\n                  allBooks.push({\n                    title: doc.data().title,\n                    author: doc.data().author,\n                    id: doc.data().id,\n                    thumbnail: doc.data().thumbnail,\n                    categories: doc.data().categories,\n                  });\n                });\n\n                allMappedBooks = this.mapBooks(allBooks);\n\n                this.setState({\n                  recommendationRequest: doc.data(),\n                  formattedDate: formatted,\n                  books: allMappedBooks,\n                });\n              })\n              .catch((error) => {\n                console.log(\"Error getting documents: \", error);\n              });\n          });\n        } else {\n          this.setState({\n            recommendationRequest: doc.data(),\n            formattedDate: formatted,\n            books: [],\n          });\n        }\n\n      } else {\n        const status = {\n          type: \"error\",\n          message: `Recommendation request does not exist`,\n        }\n        this.props.showStatusCallback(status);\n      }\n    }).catch((error) => {\n      const status = {\n        type: \"error\",\n        message: error.message,\n      }\n      this.props.showStatusCallback(status);\n      console.log(\"Error getting document:\", error);\n    });\n  }\n\n  mapBooks = (books) => {\n    const bookItems = books.map((book) => {\n      return <BookItem\n        {...this.props}\n        key={book.id}\n        title={book.title}\n        author={book.author}\n        id={book.id}\n        thumbnail={book.thumbnail}\n        categories={book.categories}\n        deleteBookCallback={this.deleteBook}\n      />\n    });\n\n    return (bookItems);\n  }\n\n  onShowAddBookPage = () => {\n    this.setState({\n      showAddBook: true,\n    })\n  }\n\n  onHideAddBookPage = () => {\n    this.setState({\n      showAddBook: false,\n    })\n    window.location.reload();\n  }\n\n  render() {\n    if (this.state.showAddBook) {\n      return (\n        <div>\n          <div className=\"show-recommendation-container\">\n            <h2>Request Details:</h2>\n            <span className=\"rec-name-date-container\">\n              {this.state.formattedDate}\n              {` ${this.state.recommendationRequest.user}`}\n              {this.state.recommendationRequest.categories ? <ul className=\"rec-category-list\">{this.formatCategories()}</ul> : null}\n            </span>\n            <div className=\"note-container\">{this.state.recommendationRequest.note}</div>\n\n          </div>\n          <AddBook {...this.props} hideAddBookCallback={this.onHideAddBookPage} currentRequest={this.props.match.params.id} />\n        </div>\n      )\n    }\n\n    if (this.state.recommendationRequest.user) {\n      return (\n        <div>\n          <div className=\"show-recommendation-container\">\n            <h2>Request Details:</h2>\n            <span className=\"rec-name-date-container\">\n              {this.state.formattedDate}\n              {` ${this.state.recommendationRequest.user}`}\n              {this.state.recommendationRequest.categories ? <ul className=\"rec-category-list\">{this.formatCategories()}</ul> : null}\n            </span>\n            <div className=\"note-container\">{this.state.recommendationRequest.note}</div>\n\n          </div>\n          <div className=\"book-items-container\">\n            <h2 className=\"show-recommendation-header\">Responses:</h2>\n            <span className=\"button submit-button\" onClick={this.onShowAddBookPage}>Submit a New Book</span>\n\n\n            {this.state.books !== [] ? this.state.books : \"null\"}\n\n          </div>\n        </div>\n      );\n    } else {\n      return (null);\n    }\n  }\n}\n\nexport default ShowRecommendation;","import React, { Component } from \"react\";\nimport { BrowserRouter as Router, Route, Link, Switch } from \"react-router-dom\";\nimport './App.css'\nimport Home from \"./components/Home.js\";\nimport Books from './components/Books.js';\nimport ShowBook from './components/ShowBook.js';\nimport AddBook from './components/AddBook.js';\nimport Recommendations from './components/Recommendations.js';\nimport AddRecommendation from './components/AddRecommendation.js';\nimport ShowRecommendation from './components/ShowRecommendation.js';\n\nimport withFirebaseAuth from 'react-with-firebase-auth';\nimport 'firebase/auth';\nimport firebase from './firebaseConfig';\n// import * as firebase from 'firebase/app';\n\n// Required for side-effects\nrequire(\"firebase/firestore\");\n\n// const firebaseApp = firebase.initializeApp(firebaseConfig);\nconst firebaseAppAuth = firebase.auth();\n\n\nconst providers = {\n  googleProvider: new firebase.auth.GoogleAuthProvider(),\n};\n\n\nfunction Users() {\n  return <h2>Users</h2>;\n}\n\nclass App extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      authUser: null,\n      statusToShow: {\n        message: \"\",\n        type: \"hidden\",\n      },\n    }\n  }\n\n  showNewStatus = (status) => {\n      this.setState ({\n        statusToShow: {\n          message: status.message,\n          type: status.type,\n        }\n      });\n\n      setTimeout(this.resetStatus, 8000);\n  }\n\n  resetStatus = () => {\n    this.setState ({\n      statusToShow: {\n        message: \"\",\n        type: \"hidden\",\n      }\n    })\n  }\n\n  checkAgainstDatabase = (user) => {\n    const docRef = firebase.firestore().collection(\"users\").doc(user.email);\n    docRef.get().then(function (doc) {\n      if (doc.exists) {\n        console.log(\"Document data:\", doc.data());\n      } else {\n        this.addUserToDatabase(user);\n      }\n    }).catch(function (error) {\n      console.log(\"Error getting document:\", error);\n    });\n\n  }\n\n  addUserToDatabase = (user) => {\n    const db = firebase.firestore();\n    db.collection(\"users\").doc(user.email).set({\n      name: user.displayName,\n      email: user.email,\n    })\n      .then(function () {\n        console.log(\"Document successfully written!\");\n      })\n      .catch(function (error) {\n        console.error(\"Error writing document: \", error);\n      });\n    console.log(\"No such document!\");\n  }\n\n  onSignIn = (event) => {\n    var provider = new firebase.auth.GoogleAuthProvider();\n\n    firebase.auth().signInWithPopup(provider).then((result) => {\n      // This gives you a Google Access Token. You can use it to access the Google API.\n      // var token = result.credential.accessToken;\n      // The signed-in user info.\n      var user = result.user;\n\n      this.checkAgainstDatabase(user);\n      const status = {\n        type: \"success\",\n        message: \"Successfully logged in\",\n      }\n      this.showNewStatus(status);\n    }).catch(function (error) {\n      // Handle Errors here.\n      // var errorCode = error.code;\n      // var errorMessage = error.message;\n      // // The email of the user's account used.\n      // var email = error.email;\n      // // The firebase.auth.AuthCredential type that was used.\n      // var credential = error.credential;\n      const status = {\n        type: \"error\",\n        message: error.message,\n      }\n      this.showNewStatus(status);\n    });\n  }\n\n  render() {\n    \n    const {\n      user,\n      signOut,\n    } = this.props;\n\n    return (\n      <Router>\n        <div>\n          <nav>\n            <div className=\"login\">\n              {\n                user\n                  ? <span className=\"login-span\">Hello, {user.displayName}</span>\n                  : <span className=\"login-span\">Please sign in.</span>\n              }\n              {\n                user\n                  ? <span className=\"button\" onClick={signOut}>Sign out</span>\n                  : <span className=\"button\" onClick={this.onSignIn}>Sign in with Google</span>\n              }\n            </div>\n\n            <h1 className=\"logo\"><Link to=\"/\">Check It Out</Link></h1>\n\n            <ul>\n              <li>\n                <Link to=\"/books/\">Full Library</Link>\n              </li>\n              <li>\n                <Link to=\"/recs/\">Recommendation Requests</Link>\n              </li>\n            </ul>\n          </nav>\n          <div className={`status ${this.state.statusToShow.type}`}>\n              <p>{this.state.statusToShow.message}</p>\n          </div>\n          <Switch>\n            <Route path=\"/\" exact component={Home} />\n            <Route\n              path='/books/' exact\n              render={(props) => <Books {...props} showStatusCallback={this.showNewStatus} />}\n            />\n            <Route path=\"/users/\" component={Users} />\n            <Route path=\"/books/:id\" render={(props) => <ShowBook {...props} showStatusCallback={this.showNewStatus} />} />\n            <Route path=\"/addbook/\" render={(props) => <AddBook {...props} showStatusCallback={this.showNewStatus} />} />\n            <Route path=\"/recs/\" exact render={(props) => <Recommendations {...props} {...this.props} showStatusCallback={this.showNewStatus} />} />\n            <Route path=\"/addrec/\" render={(props) => <AddRecommendation {...props} {...this.props} showStatusCallback={this.showNewStatus} />} />\n            <Route path=\"/recs/:id\" render={(props) => <ShowRecommendation {...props} {...this.props} showStatusCallback={this.showNewStatus} />} />\n           \n          </Switch>\n\n        </div>\n      </Router>\n    )\n  };\n}\n\n\nexport default withFirebaseAuth({\n  providers,\n  firebaseAppAuth,\n})(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}