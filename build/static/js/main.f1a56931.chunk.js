(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{42:function(e,t,a){e.exports=a(92)},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},92:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),o=a(36),c=a.n(o),i=(a(47),a(2)),r=a(3),l=a(5),u=a(4),h=a(6),m=a(10),d=a(14),p=(a(48),a(49),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,"Home Page")}}]),t}(n.Component)),b=a(20);b.initializeApp({apiKey:"AIzaSyAD0ttSvuW22OTa4SidFkKEJx7fBGjFvr0",authDomain:"check-it-out-efcdc.firebaseapp.com",databaseURL:"https://check-it-out-efcdc.firebaseio.com",projectId:"check-it-out-efcdc",storageBucket:"check-it-out-efcdc.appspot.com",messagingSenderId:"407557781729",appId:"1:407557781729:web:05052bbc5c9ac84f"});var g=b,f=(a(60),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleInputChange=function(e){var t=a.state.isChecked;a.setState({isChecked:!t}),!1===a.state.isChecked?a.props.addFilterCallback(e.target.name):a.props.removeFilterCallback(e.target.name)},a.state={isChecked:!1},a}return Object(h.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement("label",{className:"category-checkbox"},s.a.createElement("input",{name:this.props.name,type:"checkbox",checked:this.state.isChecked,onChange:this.handleInputChange}),this.props.name)}}]),t}(n.Component)),k=(a(61),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onSearchChange=function(e){a.setState({searchText:e.target.value}),a.props.searchBooksCallback(e.target.value)},a.state={searchText:""},a}return Object(h.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"search-bar-container"},s.a.createElement("label",{className:"search-label"},"Search Books:",s.a.createElement("input",{className:"search-input",placeholder:"Title, author",value:this.state.searchText,onChange:this.onSearchChange})))}}]),t}(n.Component)),v=(a(62),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={categories:[]},a}return Object(h.a)(t,e),Object(r.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.state.categories;g.firestore().collection("categories").get().then(function(a){a.forEach(function(e){t.push({name:e.data().name,type:e.data().type})});var n=t.map(function(t){return s.a.createElement(f,{key:t.name,name:t.name,type:t.type,addFilterCallback:e.props.addFilterCallback,removeFilterCallback:e.props.removeFilterCallback})});e.setState({categories:n})})}},{key:"render",value:function(){return s.a.createElement("div",{className:"filterpane-container"},s.a.createElement(k,{searchBooksCallback:this.props.searchBooksCallback}),s.a.createElement("div",{className:"categories-container"},s.a.createElement("p",null,s.a.createElement("strong",null,"Filter by Category:")),this.state.categories))}}]),t}(n.Component)),E=(a(63),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"bookitem"},s.a.createElement("img",{src:this.props.thumbnail,alt:this.props.title,className:"book-item-thumbnail"}),s.a.createElement(m.b,{to:"".concat(this.props.match.url).concat(this.props.id)},this.props.title),s.a.createElement("p",null," ",this.props.author))}}]),t}(n.Component)),C=(a(68),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).compareTitles=function(e,t){var a=e.title.toUpperCase(),n=t.title.toUpperCase(),s=0;return a>n?s=1:a<n&&(s=-1),s},a.onAddFilter=function(e){var t=a.state.filters;t.includes(e)||t.push(e),a.setState({filters:t}),a.onFilterResults()},a.onRemoveFilter=function(e){var t=a.state.filters;if(t.includes(e)){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}a.setState({filters:t}),a.onFilterResults()},a.onSearchBooks=function(e){var t=a.state.books,n=[];""!==e?t.forEach(function(t){(t.props.title.toLowerCase().includes(e.toLowerCase())||t.props.author.toLowerCase().includes(e.toLowerCase()))&&n.push(t)}):a.onFilterResults(),a.setState({books:n})},a.onFilterResults=function(e){var t=[],n=g.firestore().collection("books");a.state.filters.forEach(function(e){var t="categories."+e;console.log(t),n=n.where(t,"==",!0)}),n.get().then(function(e){e.forEach(function(e){t.push({title:e.data().title,author:e.data().author,thumbnail:e.data().thumbnail,id:e.data().id,categories:e.data().categories})}),t.sort(a.compareTitles);var n=t.map(function(e){return s.a.createElement(E,Object.assign({},a.props,{key:e.id,title:e.title,author:e.author,id:e.id,thumbnail:e.thumbnail,categories:e.categories}))});a.setState({books:n})})},a.state={books:[],defaultBooks:[],filters:[]},a}return Object(h.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.books;g.firestore().collection("books").orderBy("title").get().then(function(a){a.forEach(function(e){t.push({title:e.data().title,author:e.data().author,id:e.data().id,thumbnail:e.data().thumbnail,categories:e.data().categories})});var n=t.map(function(t){return s.a.createElement(E,Object.assign({},e.props,{key:t.id,title:t.title,author:t.author,id:t.id,thumbnail:t.thumbnail,categories:t.categories}))});e.setState({books:n,defaultBooks:n})})}},{key:"render",value:function(){return s.a.createElement("div",{className:"books-container"},s.a.createElement("div",{className:"booklist-container"},s.a.createElement("div",{className:"book-search"},s.a.createElement(m.b,{to:"/addbook/"},"Add a book to the library")),this.state.books),s.a.createElement("div",{className:"filter-pane-container"},s.a.createElement(v,Object.assign({},this.props,{addFilterCallback:this.onAddFilter,removeFilterCallback:this.onRemoveFilter,searchBooksCallback:this.onSearchBooks}))))}}]),t}(n.Component)),y=(a(69),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleInputChange=function(e){var t=a.state.isChecked;a.setState({isChecked:!t})},a.state={isChecked:a.props.selected},a}return Object(h.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:this.props.hidden?"hidden":""},s.a.createElement("label",{className:this.state.isChecked?"category-item selected":"category-item unselected"},s.a.createElement("input",{name:this.props.name,type:"checkbox",checked:this.state.isChecked,onChange:this.handleInputChange}),s.a.createElement("span",{className:this.props.editing?"checkmark":"checkmark hidden"}),this.props.name))}}]),t}(n.Component)),O=(a(70),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).listCategories=function(e){var t=[];a.props.selectedCategories.forEach(function(a){t.push(s.a.createElement(y,{key:a,name:a,selected:!0,editing:e}))});var n=!e;a.props.unselectedCategories.forEach(function(a){t.push(s.a.createElement(y,{key:a,name:a,selected:!1,editing:e,hidden:n}))}),a.setState({allCategoryItems:t})},a.saveCategories=function(){a.changeEditState()},a.editCategories=function(){a.changeEditState()},a.changeEditState=function(){var e=!a.state.editing;a.listCategories(e),a.setState({editing:!a.state.editing})},a.state={allCategoryItems:[],editing:!1},a}return Object(h.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.listCategories(this.state.editing)}},{key:"render",value:function(){return s.a.createElement("div",{className:"categories-container"},s.a.createElement("span",{className:"categories-header"},s.a.createElement("strong",null,"Categories:"),this.state.editing?s.a.createElement("span",{className:"edit-button",onClick:this.saveCategories},"Save"):s.a.createElement("span",{className:"edit-button",onClick:this.editCategories},"Add/Edit")),s.a.createElement("div",{className:"category-items-container"},this.state.allCategoryItems))}}]),t}(n.Component)),j=(a(71),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).changeCategoryAssignment=function(e){},a.state={book:{},categories:[],selectedCategories:[],unselectedCategories:[]},a}return Object(h.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;g.firestore().collection("books").doc(this.props.match.params.id).get().then(function(t){if(t.exists){var a=t.data().categories,n=a?Object.keys(a):[];e.setState({book:t.data(),categories:n})}else{e.props.showStatusCallback({type:"error",message:"Book does not exist"})}}).catch(function(t){var a={type:"error",message:t.message};e.props.showStatusCallback(a),console.log("Error getting document:",t)});var t=[],a=[];g.firestore().collection("categories").get().then(function(n){n.forEach(function(n){e.state.categories.includes(n.data().name)?a.push(n.data().name):t.push(n.data().name)}),e.setState({selectedCategories:a,unselectedCategories:t})})}},{key:"render",value:function(){return this.state.book.title?s.a.createElement("div",{className:"show-book-container"},s.a.createElement(m.b,{to:"/books/",className:"back-link"},"Back to book list"),s.a.createElement("div",{className:"book-info"},s.a.createElement("img",{src:this.state.book.thumbnail,alt:this.state.book.title,className:"thumbnail"}),s.a.createElement("h2",{className:"title"},this.state.book.title),s.a.createElement("span",{className:"author"},s.a.createElement("strong",null,this.state.book.author)),s.a.createElement("span",{className:"publish-info"},"Published by: ",this.state.book.publisher,", ",this.state.book.publishedDate),s.a.createElement("span",{className:"description"},this.state.book.description),s.a.createElement("span",{className:"created-by"},s.a.createElement("strong",null,"Book added by:")," ",this.state.book.createdByName?this.state.book.createdByName:"")),s.a.createElement("div",{className:"book-categories-container"},this.state.unselectedCategories.length>0||this.state.selectedCategories.length>0?s.a.createElement(O,Object.assign({},this.props,{categories:this.state.categories,selectedCategories:this.state.selectedCategories,unselectedCategories:this.state.unselectedCategories})):null)):null}}]),t}(n.Component)),S=a(40),N=a.n(S),w=(a(88),a(89),function(e){var t=e.title,a=e.author,n=e.thumbnail,o=e.description,c=e.addBookCallback;return s.a.createElement("div",{className:"search-results"},s.a.createElement("div",{className:"search-results-image-and-button"},s.a.createElement("img",{src:n,alt:t,className:"search-result-thumbnail"}),s.a.createElement("span",{className:"add-button",onClick:function(){c(e)}},"Add to Library")),s.a.createElement("span",{className:"search-result-title"},t),s.a.createElement("span",{className:"search-result-author"}," ",a),s.a.createElement("span",{className:"search-result-description"},o))}),B="https://www.googleapis.com/books/v1/volumes",I=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onHandleSearchClick=function(e){e.preventDefault(),a.getBooks()},a.onHandleSearchChange=function(e){a.setState({searchQuery:e.target.value})},a.addBook=function(e){g.firestore().collection("books").doc(e.id).set({id:e.id,title:e.title,author:e.author,thumbnail:e.thumbnail,publishedDate:e.publishedDate,publisher:e.publisher,previewLink:e.previewLink,description:e.description,createdByEmail:g.auth().currentUser.email,createdByName:g.auth().currentUser.displayName}).then(function(){a.setState({shouldRedirect:!0,addedBook:e.id});a.props.showStatusCallback({type:"success",message:"Successfully added book to library! Add categories on this page."})}).catch(function(e){var t={type:"error",message:e};this.props.showStatusCallback(t)})},a.getBooks=function(){N.a.get("".concat(B,"?q=").concat(a.state.searchQuery,"&printType=books")).then(function(e){var t=e.data.items.map(function(e){return s.a.createElement(w,{key:e.id,id:e.id,title:e.volumeInfo.title,author:e.volumeInfo.authors?e.volumeInfo.authors[0]:"unknown",publishedDate:e.volumeInfo.publishedDate?e.volumeInfo.publishedDate:"unknown",publisher:e.volumeInfo.publisher?e.volumeInfo.publisher:"Unknown",thumbnail:e.volumeInfo.imageLinks?e.volumeInfo.imageLinks.smallThumbnail:"",description:e.volumeInfo.description?e.volumeInfo.description:"",previewLink:e.volumeInfo.previewLink?e.volumeInfo.previewLink:"",addBookCallback:a.addBook})});a.setState({results:t})}).catch(function(e){console.log(e)})},a.state={searchQuery:"",results:[],shouldRedirect:!1,addedBook:null},a}return Object(h.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return this.state.shouldRedirect?s.a.createElement(d.a,{to:"/books/".concat(this.state.addedBook)}):s.a.createElement("div",{className:"add-book-container"},s.a.createElement("div",{className:"add-book-search-bar"},s.a.createElement("label",null,"Search for a new book:",s.a.createElement("input",{name:"search-api",placeholder:"Title",value:this.state.searchQuery,onChange:this.onHandleSearchChange}),s.a.createElement("span",{onClick:this.onHandleSearchClick,className:"submit-button"},"Search"))),s.a.createElement("div",{className:"search-results-container"},this.state.results))}}]),t}(n.Component),F=a(41);a(90);a(91);var D=g.auth(),T={googleProvider:new g.auth.GoogleAuthProvider};function A(){return s.a.createElement("h2",null,"Users")}var x=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).showNewStatus=function(e){a.setState({statusToShow:{message:e.message,type:e.type}}),setTimeout(a.resetStatus,5e3)},a.resetStatus=function(){a.setState({statusToShow:{message:"",type:"hidden"}})},a.checkAgainstDatabase=function(e){g.firestore().collection("users").doc(e.email).get().then(function(t){t.exists?console.log("Document data:",t.data()):this.addUserToDatabase(e)}).catch(function(e){console.log("Error getting document:",e)})},a.addUserToDatabase=function(e){g.firestore().collection("users").doc(e.email).set({name:e.displayName,email:e.email}).then(function(){console.log("Document successfully written!")}).catch(function(e){console.error("Error writing document: ",e)}),console.log("No such document!")},a.onSignIn=function(e){var t=new g.auth.GoogleAuthProvider;g.auth().signInWithPopup(t).then(function(e){var t=e.user;a.checkAgainstDatabase(t);a.showNewStatus({type:"success",message:"Successfully logged in"})}).catch(function(e){var t={type:"error",message:e.message};this.showNewStatus(t)})},a.state={authUser:null,statusToShow:{message:"",type:"hidden"}},a}return Object(h.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.user,n=t.signOut;return s.a.createElement(m.a,null,s.a.createElement("div",null,s.a.createElement("nav",null,s.a.createElement("div",{className:"login"},a?s.a.createElement("span",{className:"login-span"},"Hello, ",a.displayName):s.a.createElement("span",{className:"login-span"},"Please sign in."),a?s.a.createElement("span",{className:"login-button",onClick:n},"Sign out"):s.a.createElement("span",{className:"login-button",onClick:this.onSignIn},"Sign in with Google")),s.a.createElement("h1",{className:"logo"},"Check It Out"),s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement(m.b,{to:"/"},"Home")),s.a.createElement("li",null,s.a.createElement(m.b,{to:"/books/"},"Full Library")),s.a.createElement("li",null,s.a.createElement(m.b,{to:"/users/"},"Users")))),s.a.createElement("div",{className:"status ".concat(this.state.statusToShow.type)},s.a.createElement("p",null,this.state.statusToShow.message)),s.a.createElement(d.d,null,s.a.createElement(d.b,{path:"/",exact:!0,component:p}),s.a.createElement(d.b,{path:"/books/",exact:!0,render:function(e){return s.a.createElement(C,e)}}),s.a.createElement(d.b,{path:"/users/",component:A}),s.a.createElement(d.b,{path:"/books/:id",render:function(t){return s.a.createElement(j,Object.assign({},t,{showStatusCallback:e.showNewStatus}))}}),s.a.createElement(d.b,{path:"/addbook/",render:function(t){return s.a.createElement(I,Object.assign({},t,{showStatusCallback:e.showNewStatus}))}}))))}}]),t}(n.Component),L=Object(F.a)({providers:T,firebaseAppAuth:D})(x);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(s.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[42,1,2]]]);
//# sourceMappingURL=main.f1a56931.chunk.js.map