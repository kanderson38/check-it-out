(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{42:function(e,t,a){e.exports=a(92)},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},92:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),o=a(36),c=a.n(o),r=(a(47),a(2)),i=a(3),l=a(5),u=a(4),h=a(6),d=a(10),m=a(14),p=(a(48),a(49),function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,"Home Page")}}]),t}(s.Component)),b=a(20);b.initializeApp({apiKey:"AIzaSyAD0ttSvuW22OTa4SidFkKEJx7fBGjFvr0",authDomain:"check-it-out-efcdc.firebaseapp.com",databaseURL:"https://check-it-out-efcdc.firebaseio.com",projectId:"check-it-out-efcdc",storageBucket:"check-it-out-efcdc.appspot.com",messagingSenderId:"407557781729",appId:"1:407557781729:web:05052bbc5c9ac84f"});var g=b,f=(a(60),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleInputChange=function(e){var t=a.state.isChecked;a.setState({isChecked:!t}),!1===a.state.isChecked?a.props.addFilterCallback(e.target.name):a.props.removeFilterCallback(e.target.name)},a.state={isChecked:!1},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e="category-checkbox ".concat(this.props.type);return n.a.createElement("label",{className:e},n.a.createElement("input",{name:this.props.name,type:"checkbox",checked:this.state.isChecked,onChange:this.handleInputChange}),this.props.name)}}]),t}(s.Component)),k=(a(61),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onSearchChange=function(e){a.setState({searchText:e.target.value}),a.props.searchBooksCallback(e.target.value)},a.state={searchText:""},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"search-bar-container"},n.a.createElement("label",{className:"search-label"},"Search Books:",n.a.createElement("input",{className:"search-input",placeholder:"Title, author",value:this.state.searchText,onChange:this.onSearchChange})))}}]),t}(s.Component)),C=(a(62),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={categories:[]},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.state.categories;g.firestore().collection("categories").get().then(function(a){a.forEach(function(e){t.push({name:e.data().name,type:e.data().type})});var s=t.map(function(t){return n.a.createElement(f,{key:t.name,name:t.name,type:t.type,addFilterCallback:e.props.addFilterCallback,removeFilterCallback:e.props.removeFilterCallback})});e.setState({categories:s})})}},{key:"render",value:function(){return n.a.createElement("div",{className:"filterpane-container"},n.a.createElement(k,{searchBooksCallback:this.props.searchBooksCallback}),n.a.createElement("div",{className:"categories-container"},n.a.createElement("p",null,n.a.createElement("strong",null,"Filter by Category:")),this.state.categories))}}]),t}(s.Component)),v=(a(63),function(e){function t(){var e,a;Object(r.a)(this,t);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).onDelete=function(){a.props.deleteBookCallback(a.props.id)},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"bookitem"},n.a.createElement("img",{src:this.props.thumbnail,alt:this.props.title,className:"book-item-thumbnail"}),n.a.createElement(d.b,{to:"".concat(this.props.match.url).concat(this.props.id)},this.props.title),n.a.createElement("p",null," ",this.props.author),n.a.createElement("span",{className:"delete-button",onClick:this.onDelete},n.a.createElement("small",null,"Delete from Library")))}}]),t}(s.Component)),E=(a(68),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).deleteBook=function(e){g.firestore().collection("books").doc(e).delete().then(function(){a.props.showStatusCallback({type:"success",message:"Successfully deleted book from library!"}),console.log("Document successfully deleted!")}).catch(function(e){console.error("Error removing document: ",e);var t={type:"error",message:e};a.props.showStatusCallback(t)}),a.onFilterResults()},a.compareTitles=function(e,t){var a=e.title.toUpperCase(),s=t.title.toUpperCase(),n=0;return a>s?n=1:a<s&&(n=-1),n},a.onAddFilter=function(e){var t=a.state.filters;t.includes(e)||t.push(e),a.setState({filters:t}),a.onFilterResults()},a.onRemoveFilter=function(e){var t=a.state.filters;if(t.includes(e)){var s=t.indexOf(e);-1!==s&&t.splice(s,1)}a.setState({filters:t}),a.onFilterResults()},a.onSearchBooks=function(e){var t=a.state.books,s=[];""!==e?t.forEach(function(t){(t.props.title.toLowerCase().includes(e.toLowerCase())||t.props.author.toLowerCase().includes(e.toLowerCase()))&&s.push(t)}):a.onFilterResults(),a.setState({books:s})},a.onFilterResults=function(e){var t=[],s=g.firestore().collection("books");a.state.filters.forEach(function(e){var t="categories."+e;s=s.where(t,"==",!0)}),s.get().then(function(e){e.forEach(function(e){t.push({title:e.data().title,author:e.data().author,thumbnail:e.data().thumbnail,id:e.data().id,categories:e.data().categories})}),t.sort(a.compareTitles);var s=a.mapBooks(t);a.setState({books:s})})},a.mapBooks=function(e){return e.map(function(e){return n.a.createElement(v,Object.assign({},a.props,{key:e.id,title:e.title,author:e.author,id:e.id,thumbnail:e.thumbnail,categories:e.categories,deleteBookCallback:a.deleteBook}))})},a.state={books:[],defaultBooks:[],filters:[]},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.books;g.firestore().collection("books").orderBy("title").get().then(function(a){a.forEach(function(e){t.push({title:e.data().title,author:e.data().author,id:e.data().id,thumbnail:e.data().thumbnail,categories:e.data().categories})});var s=e.mapBooks(t);e.setState({books:s,defaultBooks:s})})}},{key:"render",value:function(){return n.a.createElement("div",{className:"books-container"},n.a.createElement("div",{className:"booklist-container"},n.a.createElement("div",{className:"book-search"},n.a.createElement(d.b,{to:"/addbook/"},"Add a book to the library")),this.state.books),n.a.createElement("div",{className:"filter-pane-container"},n.a.createElement(C,Object.assign({},this.props,{addFilterCallback:this.onAddFilter,removeFilterCallback:this.onRemoveFilter,searchBooksCallback:this.onSearchBooks}))))}}]),t}(s.Component)),y=(a(69),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleInputChange=function(e){if(a.props.editing){var t=a.state.isChecked;a.setState({isChecked:!t}),a.props.updateSelectedCategoriesCallback(e.target.name,t)}},a.state={isChecked:a.props.selected},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:this.props.hidden?"hidden":""},n.a.createElement("label",{className:this.state.isChecked?"category-item selected":"category-item unselected"},n.a.createElement("input",{name:this.props.name,type:"checkbox",checked:this.state.isChecked,onChange:this.handleInputChange}),n.a.createElement("span",{className:this.props.editing?"checkmark":"checkmark hidden"}),this.props.name))}}]),t}(s.Component)),S=(a(70),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).changeNewCategory=function(e){a.setState({newCategory:e.target.value})},a.createNewCategory=function(){g.firestore().collection("categories").doc(a.state.newCategory).set({name:a.state.newCategory}).then(function(){a.props.showStatusCallback({type:"success",message:"Successfully created category!"}),console.log("Document successfully written!");var e=a.state.allCategoryItems;e.unshift(n.a.createElement(y,{key:a.state.newCategory,name:a.state.newCategory,selected:!1,editing:a.state.editing,updateSelectedCategoriesCallback:a.props.updateSelectedCategoriesCallback})),a.setState({allCategoryItems:e,newCategory:""})}).catch(function(e){var t={type:"error",message:e};a.props.showStatusCallback(t),console.error("Error writing document: ",e)})},a.listCategories=function(e){var t=[];a.props.selectedCategories.forEach(function(s){t.push(n.a.createElement(y,{key:s,name:s,selected:!0,editing:e,updateSelectedCategoriesCallback:a.props.updateSelectedCategoriesCallback}))});var s=!e;a.props.unselectedCategories.forEach(function(o){t.push(n.a.createElement(y,{key:o,name:o,selected:!1,editing:e,updateSelectedCategoriesCallback:a.props.updateSelectedCategoriesCallback,hidden:s}))}),a.setState({allCategoryItems:t})},a.saveCategories=function(){a.changeEditState(),console.log(a.props),a.props.saveSelectedCategoriesCallback()},a.editCategories=function(){a.changeEditState()},a.changeEditState=function(){var e=!a.state.editing;a.listCategories(e),a.setState({editing:!a.state.editing})},a.state={allCategoryItems:[],editing:!1,newCategory:""},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.listCategories(this.state.editing)}},{key:"render",value:function(){return n.a.createElement("div",{className:"categories-container"},n.a.createElement("span",{className:"categories-header"},n.a.createElement("strong",null,"Categories:"),this.state.editing?n.a.createElement("span",{className:"edit-button",onClick:this.saveCategories},"Save"):n.a.createElement("span",{className:"edit-button",onClick:this.editCategories},"Add/Edit")),n.a.createElement("div",{className:this.state.editing?"new-categories":"hidden"},n.a.createElement("span",null,"Don't see the category you want? ",n.a.createElement("span",{className:"create-category-label"},"Create a new category:"),n.a.createElement("input",{name:"add-category",value:this.state.newCategory,onChange:this.changeNewCategory}),n.a.createElement("span",{className:"create-category-submit",onClick:this.createNewCategory},"Create"))),n.a.createElement("div",{className:"category-items-container"},this.state.allCategoryItems))}}]),t}(s.Component)),w=(a(71),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).changeCategoryAssignment=function(e){g.firestore().collection("books").doc(a.props.match.params.id).update({categories:e}).then(function(){a.props.showStatusCallback({type:"success",message:"Successfully updated categories!"})}).catch(function(e){var t={type:"error",message:e};this.props.showStatusCallback(t)})},a.saveSelectedCategories=function(){var e={};a.state.selectedCategories.forEach(function(t){e[t]=!0}),a.changeCategoryAssignment(e)},a.updateSelectedCategories=function(e,t){var s=a.state.selectedCategories,n=a.state.unselectedCategories;if(t){n.push(e);var o=s.filter(function(t){return t!==e});a.setState({unselectedCategories:n,selectedCategories:o})}else{s.push(e);var c=n.filter(function(t){return t!==e});a.setState({selectedCategories:s,unselectedCategories:c})}},a.state={book:{},categories:[],selectedCategories:[],unselectedCategories:[]},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;g.firestore().collection("books").doc(this.props.match.params.id).get().then(function(t){if(t.exists){var a=t.data().categories,s=a?Object.keys(a):[];e.setState({book:t.data(),categories:s})}else{e.props.showStatusCallback({type:"error",message:"Book does not exist"})}}).catch(function(t){var a={type:"error",message:t.message};e.props.showStatusCallback(a),console.log("Error getting document:",t)});var t=[],a=[];g.firestore().collection("categories").get().then(function(s){s.forEach(function(s){e.state.categories.includes(s.data().name)?a.push(s.data().name):t.push(s.data().name)}),e.setState({selectedCategories:a,unselectedCategories:t})})}},{key:"render",value:function(){return this.state.book.title?n.a.createElement("div",{className:"show-book-container"},n.a.createElement(d.b,{to:"/books/",className:"back-link"},"Back to book list"),n.a.createElement("div",{className:"book-info"},n.a.createElement("img",{src:this.state.book.thumbnail,alt:this.state.book.title,className:"thumbnail"}),n.a.createElement("h2",{className:"title"},this.state.book.title),n.a.createElement("span",{className:"author"},n.a.createElement("strong",null,this.state.book.author)),n.a.createElement("span",{className:"publish-info"},"Published by: ",this.state.book.publisher,", ",this.state.book.publishedDate),n.a.createElement("span",{className:"description"},this.state.book.description),n.a.createElement("span",{className:"created-by"},n.a.createElement("strong",null,"Book added by:")," ",this.state.book.createdByName?this.state.book.createdByName:"")),n.a.createElement("div",{className:"book-categories-container"},this.state.unselectedCategories.length>0||this.state.selectedCategories.length>0?n.a.createElement(S,Object.assign({},this.props,{categories:this.state.categories,selectedCategories:this.state.selectedCategories,unselectedCategories:this.state.unselectedCategories,updateSelectedCategoriesCallback:this.updateSelectedCategories,saveSelectedCategoriesCallback:this.saveSelectedCategories,showStatusCallback:this.props.showStatusCallback})):null)):null}}]),t}(s.Component)),N=a(40),O=a.n(N),j=(a(88),a(89),function(e){var t=e.title,a=e.author,s=e.thumbnail,o=e.description,c=e.addBookCallback;return n.a.createElement("div",{className:"search-results"},n.a.createElement("div",{className:"search-results-image-and-button"},n.a.createElement("img",{src:s,alt:t,className:"search-result-thumbnail"}),n.a.createElement("span",{className:"add-button",onClick:function(){c(e)}},"Add to Library")),n.a.createElement("span",{className:"search-result-title"},t),n.a.createElement("span",{className:"search-result-author"}," ",a),n.a.createElement("span",{className:"search-result-description"},o))}),B="https://www.googleapis.com/books/v1/volumes",I=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onHandleSearchClick=function(e){e.preventDefault(),a.getBooks()},a.onHandleSearchChange=function(e){a.setState({searchQuery:e.target.value})},a.addBook=function(e){g.firestore().collection("books").doc(e.id).set({id:e.id,title:e.title,author:e.author,thumbnail:e.thumbnail,publishedDate:e.publishedDate,publisher:e.publisher,previewLink:e.previewLink,description:e.description,createdByEmail:g.auth().currentUser.email,createdByName:g.auth().currentUser.displayName}).then(function(){a.setState({shouldRedirect:!0,addedBook:e.id});a.props.showStatusCallback({type:"success",message:"Successfully added book to library! Add categories on this page."})}).catch(function(e){var t={type:"error",message:e};this.props.showStatusCallback(t)})},a.getBooks=function(){O.a.get("".concat(B,"?q=").concat(a.state.searchQuery,"&printType=books")).then(function(e){var t=e.data.items.map(function(e){return n.a.createElement(j,{key:e.id,id:e.id,title:e.volumeInfo.title,author:e.volumeInfo.authors?e.volumeInfo.authors[0]:"unknown",publishedDate:e.volumeInfo.publishedDate?e.volumeInfo.publishedDate:"unknown",publisher:e.volumeInfo.publisher?e.volumeInfo.publisher:"Unknown",thumbnail:e.volumeInfo.imageLinks?e.volumeInfo.imageLinks.smallThumbnail:"",description:e.volumeInfo.description?e.volumeInfo.description:"",previewLink:e.volumeInfo.previewLink?e.volumeInfo.previewLink:"",addBookCallback:a.addBook})});a.setState({results:t})}).catch(function(e){console.log(e)})},a.state={searchQuery:"",results:[],shouldRedirect:!1,addedBook:null},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return this.state.shouldRedirect?n.a.createElement(m.a,{to:"/books/".concat(this.state.addedBook)}):n.a.createElement("div",{className:"add-book-container"},n.a.createElement("div",{className:"add-book-search-bar"},n.a.createElement("label",null,"Search for a new book:",n.a.createElement("input",{name:"search-api",placeholder:"Title",value:this.state.searchQuery,onChange:this.onHandleSearchChange}),n.a.createElement("span",{onClick:this.onHandleSearchClick,className:"submit-button"},"Search"))),n.a.createElement("div",{className:"search-results-container"},this.state.results))}}]),t}(s.Component),D=a(41);a(90);a(91);var F=g.auth(),A={googleProvider:new g.auth.GoogleAuthProvider};function T(){return n.a.createElement("h2",null,"Users")}var L=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).showNewStatus=function(e){a.setState({statusToShow:{message:e.message,type:e.type}}),setTimeout(a.resetStatus,8e3)},a.resetStatus=function(){a.setState({statusToShow:{message:"",type:"hidden"}})},a.checkAgainstDatabase=function(e){g.firestore().collection("users").doc(e.email).get().then(function(t){t.exists?console.log("Document data:",t.data()):this.addUserToDatabase(e)}).catch(function(e){console.log("Error getting document:",e)})},a.addUserToDatabase=function(e){g.firestore().collection("users").doc(e.email).set({name:e.displayName,email:e.email}).then(function(){console.log("Document successfully written!")}).catch(function(e){console.error("Error writing document: ",e)}),console.log("No such document!")},a.onSignIn=function(e){var t=new g.auth.GoogleAuthProvider;g.auth().signInWithPopup(t).then(function(e){var t=e.user;a.checkAgainstDatabase(t);a.showNewStatus({type:"success",message:"Successfully logged in"})}).catch(function(e){var t={type:"error",message:e.message};this.showNewStatus(t)})},a.state={authUser:null,statusToShow:{message:"",type:"hidden"}},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.user,s=t.signOut;return n.a.createElement(d.a,null,n.a.createElement("div",null,n.a.createElement("nav",null,n.a.createElement("div",{className:"login"},a?n.a.createElement("span",{className:"login-span"},"Hello, ",a.displayName):n.a.createElement("span",{className:"login-span"},"Please sign in."),a?n.a.createElement("span",{className:"login-button",onClick:s},"Sign out"):n.a.createElement("span",{className:"login-button",onClick:this.onSignIn},"Sign in with Google")),n.a.createElement("h1",{className:"logo"},"Check It Out"),n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement(d.b,{to:"/"},"Home")),n.a.createElement("li",null,n.a.createElement(d.b,{to:"/books/"},"Full Library")),n.a.createElement("li",null,n.a.createElement(d.b,{to:"/users/"},"Users")))),n.a.createElement("div",{className:"status ".concat(this.state.statusToShow.type)},n.a.createElement("p",null,this.state.statusToShow.message)),n.a.createElement(m.d,null,n.a.createElement(m.b,{path:"/",exact:!0,component:p}),n.a.createElement(m.b,{path:"/books/",exact:!0,render:function(t){return n.a.createElement(E,Object.assign({},t,{showStatusCallback:e.showNewStatus}))}}),n.a.createElement(m.b,{path:"/users/",component:T}),n.a.createElement(m.b,{path:"/books/:id",render:function(t){return n.a.createElement(w,Object.assign({},t,{showStatusCallback:e.showNewStatus}))}}),n.a.createElement(m.b,{path:"/addbook/",render:function(t){return n.a.createElement(I,Object.assign({},t,{showStatusCallback:e.showNewStatus}))}}))))}}]),t}(s.Component),x=Object(D.a)({providers:A,firebaseAppAuth:F})(L);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(n.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[42,1,2]]]);
//# sourceMappingURL=main.d29832f3.chunk.js.map